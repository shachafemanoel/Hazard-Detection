<!DOCTYPE html>
<html>
<head>
    <title>ONNX Model Loading Test</title>
</head>
<body>
    <h1>ONNX Model Loading Test</h1>
    <div id="log"></div>
    
    <script type="module">
        import { loadONNXRuntime, createInferenceSession } from './public/js/onnx-runtime-loader.js';
        
        function log(message) {
            console.log(message);
            document.getElementById('log').innerHTML += message + '<br>';
        }
        
        async function testModelLoading() {
            try {
                log('🔄 Testing ONNX Runtime loading...');
                
                // Load ONNX Runtime
                const ort = await loadONNXRuntime();
                log('✅ ONNX Runtime loaded successfully');
                
                // Test model path
                const modelPath = 'public/object_detection_model/best0608.onnx';
                log(`🔍 Testing model at: ${modelPath}`);
                
                // Create inference session
                const session = await createInferenceSession(modelPath);
                log('✅ Model loaded successfully!');
                log(`📋 Input names: ${session.inputNames.join(', ')}`);
                log(`📋 Output names: ${session.outputNames.join(', ')}`);
                
                // Get input metadata
                const inputName = session.inputNames[0];
                const inputMeta = session.inputMetadata[inputName];
                log(`📐 Input shape: ${inputMeta.dims || inputMeta.shape}`);
                
                session.dispose();
                log('🗑️ Session disposed');
                
            } catch (error) {
                log(`❌ Error: ${error.message}`);
                console.error(error);
            }
        }
        
        testModelLoading();
    </script>
</body>
</html>